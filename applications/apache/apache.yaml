spec_version: 1
kind: application

# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
# TO-DO >> Uncomment the lines below to define the source image based on your cloud provider
# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
source:
  os_type: linux
  image:
    ami:                                                   # AWS
#      - id: ami-f90a4880                                   # AWS
#        region: eu-west-1                                  # AWS
#        username: ubuntu                                   # AWS

#    azure_image:                                           # AZURE
#      - urn: Canonical:UbuntuServer:16.04-LTS:latest       # AZURE
#        username: adminuser                                # AZURE


inputs:                             # (info) Dclaration that the application requires a port number input
  - port_number
infrastructure:                     # (info) vm sizes definition
  compute:
    spec:
      aws:
        instance_type: t2.medium
      azure:
        vm_size: Basic_A2
  connectivity:                     # (info) connectivity definition
    external:
      - port_info:
          port: $port_number        # (info) the port number values is taken from the declared input
configuration:                      # (info) deployment scripts
  initialization:
    script: apache-init.sh
  start:
    script: apache-start.sh
  healthcheck:
    wait_for_ports: ALL
    timeout: 180
debugging:
  connection_protocol: SSH
